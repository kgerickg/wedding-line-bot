<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>婚禮 Line Bot Rich Menu 圖片生成器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        canvas {
            border: 1px solid #ccc;
            max-width: 100%;
        }
        .controls {
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>婚禮 Line Bot Rich Menu 圖片生成器</h1>
    <div class="controls">
        <button id="download">下載 Rich Menu 圖片</button>
    </div>
    <canvas id="richMenuCanvas" width="2500" height="843"></canvas>
    
    <!-- 隱藏的圖片元素，用於載入圖標 -->
    <img id="seatSearchIcon" src="seat_search_icon.png" class="hidden" alt="座位查詢圖標">
    <img id="weddingPhotoIcon" src="wedding_pic.png" class="hidden" alt="婚紗照圖標">

    <script>
        // 獲取畫布和上下文
        const canvas = document.getElementById('richMenuCanvas');
        const ctx = canvas.getContext('2d');
        const seatSearchIcon = document.getElementById('seatSearchIcon');
        const weddingPhotoIcon = document.getElementById('weddingPhotoIcon');

        // 繪製背景
        function drawBackground() {
            // 主背景
            ctx.fillStyle = '#fcdab5'; // 淡粉色背景
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 左右兩個區域分隔線
            ctx.strokeStyle = '#d1c5c5';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
        }

        // 繪製座位查詢區塊
        function drawSeatLookup() {
            const x = canvas.width / 4;
            const y = canvas.height / 2;
            
            // 使用載入的圖標圖片
            // 計算圖標大小及位置，保持原比例
            const iconWidth = 400;
            const iconHeight = 400;
            const iconX = x - iconWidth / 2;
            const iconY = y - 250;
            
            // 繪製圖標
            ctx.drawImage(seatSearchIcon, iconX, iconY, iconWidth, iconHeight);
            
            // 標題文字
            ctx.fillStyle = '#222';
            ctx.font = 'bold 80px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('座位查詢', x, y + 220);
            
        }

        // 繪製婚紗照區塊
        function drawWeddingPhoto() {
            const x = canvas.width * 3 / 4;
            const y = canvas.height / 2;
            
            // 使用載入的圖片
            // 計算圖標大小及位置，保持原比例
            const iconWidth = 400;
            const iconHeight = 400;
            const iconX = x - iconWidth / 2;
            const iconY = y - 250;
            
            // 繪製圖標
            ctx.drawImage(weddingPhotoIcon, iconX, iconY, iconWidth, iconHeight);
            
            // 標題文字
            ctx.fillStyle = '#222';
            ctx.font = 'bold 80px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('婚紗照', x, y + 220);
        }

        // 等待圖片加載完成後再開始繪製
        let loadedImages = 0;
        const totalImages = 2;

        function imageLoaded() {
            loadedImages++;
            if (loadedImages === totalImages) {
                drawBackground();
                drawSeatLookup();
                drawWeddingPhoto();
            }
        }

        seatSearchIcon.onload = imageLoaded;
        weddingPhotoIcon.onload = imageLoaded;

        // 下載圖片
        document.getElementById('download').addEventListener('click', function() {
            const link = document.createElement('a');
            link.download = 'rich_menu_image.jpg';
            link.href = canvas.toDataURL('image/jpeg', 0.8);
            link.click();
        });
        
        // 如果圖片已經在緩存中，可能不會觸發onload事件，所以這裡也檢查一次
        if (seatSearchIcon.complete) loadedImages++;
        if (weddingPhotoIcon.complete) loadedImages++;
        
        if (loadedImages === totalImages) {
            drawBackground();
            drawSeatLookup();
            drawWeddingPhoto();
        }
    </script>
</body>
</html> 